<!DOCTYPE html>
<html lang="vi">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Trang ch盻ｧ - Social Network</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
</head>

<body class="bg-light">
    <nav class="navbar navbar-expand-lg navbar-dark bg-primary">
        <div class="container">
            <a class="navbar-brand" href="#">Social Network</a>
            <button id="logoutBtn" class="btn btn-outline-light ms-auto">ﾄ斉ハg xu蘯･t</button>
        </div>
    </nav>

    <div class="container mt-5 text-center">
        <h2>Chﾃo m盻ｫng b蘯｡n quay l蘯｡i 汨</h2>
        <p class="lead mt-3">Xin chﾃo, <span id="username" class="fw-bold text-primary"></span>!</p>
    </div>

    <script>
        const token = localStorage.getItem("token");
        if (!token) {
            alert("Vui lﾃｲng ﾄ惰ハg nh蘯ｭp trﾆｰ盻嫩!");
            window.location.href = "./index.html";
        } else {
            fetch("http://localhost:5001/api/auth/me", {
                    headers: {
                        Authorization: `Bearer ${token}`
                    }
                })
                .then(res => res.json())
                .then(data => {
                    if (data.user) {
                        document.getElementById("username").innerText = data.user.username;
                    } else {
                        alert("Phiﾃｪn ﾄ惰ハg nh蘯ｭp h蘯ｿt h蘯｡n, vui lﾃｲng ﾄ惰ハg nh蘯ｭp l蘯｡i!");
                        localStorage.removeItem("token");
                        window.location.href = "./index.html";
                    }
                })
                .catch(() => {
                    alert("L盻擁 khi xﾃ｡c th盻ｱc ngﾆｰ盻拱 dﾃｹng!");
                    window.location.href = "./index.html";
                });
        }

        // ﾄ斉ハg xu蘯･t
        document.getElementById("logoutBtn").addEventListener("click", () => {
            localStorage.removeItem("token");
            alert("ﾄ斉ハg xu蘯･t thﾃnh cﾃｴng!");
            window.location.href = "./index.html";
        });
    </script>

</body>

</html>